
# 概率

## 1.1 概率概论

概率和统计的差异

 - 概率
    - *概率模型已知*，要学会怎么算某些事件的概率
    - Ex: 已知一颗骰子为 ***公平骰***， 看到偶数的概率是多少?  1/2
 - 统计
    - *概率模型未知*， 要学会 怎么从大量的实验结果中去建立概率模型
    - Ex: 不知一骰是否灌铅，欲知各点出现的 概率模型?


## 1.2 集合论 

 - 学生上课不规矩」的机率 = 0. 1
 - P(学生上课不规矩) = 0. 1
 - P是概率函数, 概率函数的自变量是：事件，而事件，是一种集合

annotation:

 - 补集: A<sup>c</sup>

 - 互斥(Mutually Exclusive): 若一群集合 X₁,X₂,...,X<sub>n</sub>中任选两个集合 Xᵢ,Xⱼ都不想交，则我们称这群集合 X₁,X₂,...,X<sub>n</sub> 互斥.

De Morgan’s Law：

 - (AUB)<sup>c</sup> = A<sup>c</sup> ∩  B<sup>c</sup> 

 - 证明：在数学上，要证明两个集合是同一个集合的独门心法是：  你中有我，我中有你.

## 1.3 概率名词

 - 实验 (Experiment)
    - 一个机率「实验」包含了： 步骤 (procedures)、模型 (model)、观察(observations)
    - Ex: 丢两公平骰
        - 步骤: 「伸手取起桌上二骰，紧握后，手微微开口后向内吹口气。 之后默祷，再将骰丢入碗中，直至停止为止。」
        - 模型：(1, 1)、(1, 2), … ,(6, 6) 等发生机会均等
        - 观察：每个骰子的点数 (6, 6)
 - 结果(Outcome)
    - 是实验中可能的结果
 - 样本空间(Sample Space)
    - 机率实验所有 可能的结果的集合，通常用 𝑺 来表示
    - Ex: 连丢三次铜板，记录正反面结果
        - S = { HHH, HHT, HTH, HTT, THH, THT, TTH, TTT }
    - Ex: 幸运之轮转一次
        - S = [0,1)
    - Ex:幸运之轮转两次
        - S = [0,1) x [0,1) (2维)
 - 事件 (Event)
    - 「事件」指的是对于实验结果的某种叙述
        - Ex: 骰子出来的结果是偶数
    - 机率就是在讲实验结果符合某事件叙述的机会多大
    - 在数学上，「事件」可以看成是「结果」的集合，亦即是 「样本空间」 的子集。
        - Ex:台大生的上课出席状况
            -「结果」有哪几种：准时、迟到、旷课
            - 事件1：有出席；E₁={准时、迟到} 
            - 事件2：没规矩；E₂={迟到、旷课}
            - 究竟可能会有多少种事件呢? 2ⁿ
            - { {}, {准时} , {迟到} , {旷课} , {准时, 迟到} , {迟到, 旷课} , {准时, 旷课} , {准时, 迟到, 旷课} }
 - 事件空间 (Event Space)
    - 「事件空间」是包含所有事件的集合
    - set of sets
    - 若「样本空间」s = { O₁,O₂,...,O<sub>n</sub>} 有 n 个「结果」, 「事件空间」大小为  2ⁿ 
    - 机率是一个函数，其自变量是：事件
    - 所以机率可以看成是一个mapping 
        -  机率函数是从「事件空间」映射到 [0,1]区间, P:「事件空间」→ [0,1]
        - 它是事件的函数 (你给一个事件，它吐回一个数字给你)



## 2.1 机率公理性质

### 公理 (Axioms)

 1. `P(A) ≥ 0`
 2. `P(S) = 1`
 3. 事件 A₁,A₂, ... 互斥 => `P(A₁ ∪ A₂ ∪ ...) = P(A₁) + P(A₂) + ...`
    - 公理 3 搭起了集合运算与机率运算的桥梁!
    - 看到 集合，互斥 就应该想到公理3

### 公理衍生之机率性质

Ex: 从一副 52 张扑克牌抽中一张，结果 为 Ace 之机率为何?

Ace = {黑桃A,草花A,红心A,方块A}

抽中各色A的事件 {黑桃A}, {草花A}, {红心A},{方块A}  互斥，根据公理3，得

P(Ace) = P({黑桃A}) + P({草花A}) + P({红心A}) + P({方块A}) = 1/52 + 1/52 + 1/52 + 1/52 = 1/13

---

 - 若 E = {o₁,o₂,...,o<sub>n</sub>} , oᵢ 为单个结果， 则
    - P(E) = P({o₁}) + P({o₂}) + ... + P({o<sub>n</sub>)}
 - 证明: 
    - E = {o₁} ∪ {o₂} ∪ ... ∪ {o<sub>n</sub>)}  
        - 一个事件 可以拆为 它的各个单独结果的事件的合集
    - 因 {o₁} , {o₂} , ... , {o<sub>n</sub>)} 互斥
    - 套用公理3 得证

---

 - P(∅) = 0 
 - P(A) = 1 - P(A<sup>c</sub>)

---

 - P(A) = P(A-B) + P(A∩B)
    - 一个事件的概率，可以表示为 它 与另一个事件的差集 和 交集的 概率之和
 - 证明：
    - ![](https://raw.githubusercontent.com/mebusy/notes/master/imgs/TU_probability_deduction.png)

---

 - P(A ∪ B) = P(A) + P(B) - P(A∩B) 
    - 两个事件并集的概率，可以用 集合各自的概率 和 它们交集的 概率来表示
 - 证明
    - ![](https://raw.githubusercontent.com/mebusy/notes/master/imgs/TU_probability_deduction_01.png)
 - Ex: 在大陆随便碰上一个人，此人爱甜豆花或爱咸豆花 机率为何? 
    - 𝑷(爱甜 ∪ 爱咸) = 𝑷(爱甜) + 𝑷(爱咸) − 𝑷(爱甜 ∩ 爱咸) = ⋯
     
---

 - 切面包定理: 
    - 若C₁,C₂,...,C<sub>n</sub> 互斥，且 C₁ ∪ C₂ ∪ ... ∪ C<sub>n</sub> = S , 则
    - 对任何事件 A: P(A) = P(A∩C₁) + P(A∩C₂) + ... + P(A ∩ C<sub>n</sub>)
 - 证明
    - ![][1]
 - Ex: 阿宅心仪某可爱女店员。她的笑容打开了他封 闭的心。阿宅注意到她笑容会受生意的影响，于是 每天忠实记录该店生意与她有无对他笑。店生意有 满、普、惨三态，而她有笑、怒二态。根据记录:
    - ![](https://raw.githubusercontent.com/mebusy/notes/master/imgs/TU_probability_deduction_example_lovely_girl.png)
    - P(笑) = 1/20 + 5/20 + 5/20 = 11/20

---

 - 若 A ⊂ B , 则 P(A) ≤ P(B)

---

 - Boole's 不等式
    - 对任意 n 个事件 A₁ , A₂ , ... , A<sub>n</sub> 而言, 没有互斥要求
        - P(∪ⁿ<sub>i=1</sub> Aᵢ ) ≤ Σⁿ<sub>i=1</sub>P(Aᵢ ) 

---

 - Bonferroni's 不等式
    - 对任意n个事件A₁ , A₂ , ... , A<sub>n</sub> 而言, 没有互斥要求
        - P(∩ⁿ<sub>i=1</sub> Aᵢ ) ≥  1-Σⁿ<sub>i=1</sub>P(Aᵢ<sup>c</sup> )

---

## 2.2 条件概率

 - 条件机率的表示法 P(X|Y)
    - 𝑿：所关心之事件
    - 𝒀 ：条件 观察到的,已发生的事件

 - 𝑷( B 为正解｜卷矫漏曲) = ?
    - 未偷看时，正确答案未知。样本空间为：𝑺 = {𝑨, 𝑩, 𝑪, 𝑫}
    - 卷矫漏曲后，新的样本空间变为：𝑺′ = {𝑩, 𝑫}
    - 条件概率的样本空间 会发生变化 
 - 卷矫漏之条件发生后, 这世界 变了，有了新的天地。不符合卷矫漏条件 的 outcome 都不可能发生了。
    - 𝑷( A 为正解｜卷矫漏曲) = 𝑷( 𝑪 为正解｜卷矫漏曲) = 𝟎
    - 延伸：若某实验结果 oᵢ 与某条件 𝒀 不相交，则 P(oᵢ|Y) = 0 
 - 至于卷矫漏曲之条件事件发生后， 符合卷矫漏条件事件的实验结果的机率呢？
    - 不管卷矫漏发生否，「B为正解」与「D为正解」的机率比例应该一样，故：
        - 𝑷( B 为正解｜卷矫漏曲)：𝑷( 𝑫 为正解｜卷矫漏曲) = 𝑷( B 为正解)：𝑷( 𝑫 为正解)
    - 卷矫漏后只有可能出现「B 为正解」或「D 为正解」，故：
        - 𝑺′ ={ 𝑩, 𝑫 }, 𝑷( B 为正解｜卷矫漏曲) + 𝑷( 𝑫 为正解｜卷矫漏曲 ) = 1
    - 根据上述二式我们得到
        - 𝑷( B 为正解｜卷矫漏曲 ) = `𝑷( B 为正解)` / `( 𝑷( B 为正解 ) + 𝑷( D 为正解) )` = `𝑷( B 为正解) / 𝑷(卷矫漏曲)`
 - 延伸：若某条件事件 𝒀 包含数个实验结果：Y = { {o₁,o₂,...,o<sub>n</sub>} }
    - **P(oᵢ|Y) = P(oᵢ)/( P(o₁)+P(o₂)+P(o<sub>n</sub>) ) = P(oᵢ)/P(Y)**
    - Ex: 考虑某事件 X = {o₁,o₂,q₁,q₂} , 已知条件事件 Y = {o₁,o₂,o₃} 发生了，则
        - `P(X|Y) = P(o₁|Y) + P(o₂|Y) = P(o₁)/P(Y) + P(o₂)/P(Y) = P({o₁,o₂})/P(Y)`
 - 终极延伸: 若已知某条件事件 𝒀 发生了，则对于任何事件 𝑿 ，条件机率如下
    - `P(X|Y) = P(X∩Y)/P(Y)` 

---

 - Ex: 小美同时与小明、小华、小园暗通款曲
    -Q: 小华赢得小美芳心机率为？  1/3
    -Q: 美生日，华夜携礼至美宅。美不在，华遂于门外候之。 子时忽闻美、明于里外争吵，遂匿而窥之。未料，突见美巴 明，甩门。明，泣不成声，而华窃喜。 请问在美巴明发生后小华赢得小美芳心机率为？
        - P( 华赢美心 | 美巴明 ) = 1/2 

---

### 条件概率性质:

 - 对任何事件 𝑿 及任何条件事件 𝒀 ，我们有：
    - ![](https://raw.githubusercontent.com/mebusy/notes/master/imgs/ST_conditional_probability_properties.png)

---

### Total Probability 定理

 - 若C₁,C₂,...,C<sub>n</sub> 互斥,且 C₁ ∪ C₂ ∪ ... ∪ C<sub>n</sub> = S , 则对任意事件 𝑨 ，我们有：
    - **P(A) = P(A|C₁)|P(C₁) + P(A|C₂)|P(C₂) + ... + P(A|C<sub>n</sub>)|P(C<sub>n</sub>)**
 - 其实就是切面包定理的 条件概率版本
    - ![][1]
    - Proof: 切面包定理 => P(A) = Σⁿ<sub>i=1</sub> P(A∩Cᵢ) = Σⁿ<sub>i=1</sub> P(A|Cᵢ)·P(Cᵢ) 
 - Ex: 阿宅 vs. 可爱店员：店员对阿宅笑否， 受店的生意影响很大。已知 
    - P(满)=1/4, P(普)=1/4, P(惨)=1/2 ; P(笑｜满)=1/6, P(笑｜普)=2/6, P(笑｜惨)=3/6; 问 P(笑) = ？
    - P(笑) = Σ³<sub>i=1</sub>P(A|Cᵢ)·P(Cᵢ) = 1/6·1/4 + 2/6·1/4 + 3/6·1/2 = 9/24
    

### Bayes’ Rule

 - 若C₁,C₂,...,C<sub>n</sub> 互斥,且 C₁ ∪ C₂ ∪ ... ∪ C<sub>n</sub> = S , 则对任意事件 𝑨 ，我们有：
    - **P(Cⱼ|A) = P(A|Cⱼ)P(Cⱼ) / Σⁿ<sub>i=1</sub> P(A|Cⱼ)·P(Cⱼ)**
 - Bayes' Rule 用在很多时候，我们关心的事件(A) 根条件事件C 互换位置。
    - 其实就是全概率定理在 条件概率上的某个应用
 - Ex: 一日，老板见可爱店员笑， 请问在此情况下，当日生意满座之机率为何？
    - P(满|笑) = P(满∩笑)/P(笑) = P(笑|满)·P(满) / (9/24) = 1/6·1/4 / (9/24) = 1/9







---

 [1]: https://raw.githubusercontent.com/mebusy/notes/master/imgs/TU_probability_deduction_02.png
    
